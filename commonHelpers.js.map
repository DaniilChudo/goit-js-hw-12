{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '45168431-de79dc5356fbae8131b712894'; \nconst BASE_URL = 'https://pixabay.com/api/';\nconst PER_PAGE = 15;  \n\nexport async function fetchImages(query, page) {\n  try {\n    const response = await axios.get(`${BASE_URL}`, {\n      params: {\n        key: API_KEY,\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        page: page,\n        per_page: PER_PAGE\n      }\n    });\n    return response.data;\n  } catch (error) {\n    console.error('Error fetching images:', error);\n    throw error;\n  }\n}","import SimpleLightbox from 'simplelightbox';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css'; \nimport 'simplelightbox/dist/simple-lightbox.min.css'; \n\nlet lightbox;\n\nexport function renderImages(images) {\n  const gallery = document.querySelector('.gallery');\n\n  if (images.length === 0) {\n    showError('Sorry, there are no images matching your search query. Please try again!');\n    return;\n  }\n\n  images.forEach(image => {\n    const card = document.createElement('a');\n    card.classList.add('card');\n    card.href = image.largeImageURL; \n    card.setAttribute('data-caption', image.tags);\n\n    const imgElement = document.createElement('img');\n    imgElement.src = image.webformatURL;\n    imgElement.alt = image.tags;\n\n    const cardInfo = document.createElement('div');\n    cardInfo.classList.add('card-info');\n\n    const likes = document.createElement('p');\n    likes.textContent = `Likes: ${image.likes}`;\n\n    const views = document.createElement('p');\n    views.textContent = `Views: ${image.views}`;\n\n    const comments = document.createElement('p');\n    comments.textContent = `Comments: ${image.comments}`;\n\n    const downloads = document.createElement('p');\n    downloads.textContent = `Downloads: ${image.downloads}`;\n\n    cardInfo.appendChild(likes);\n    cardInfo.appendChild(views);\n    cardInfo.appendChild(comments);\n    cardInfo.appendChild(downloads);\n\n    card.appendChild(imgElement);\n    card.appendChild(cardInfo);\n\n    gallery.appendChild(card);\n  });\n\n  if (lightbox) {\n    lightbox.refresh();\n  } else {\n    lightbox = new SimpleLightbox('.gallery a', {\n      captionsData: 'data-caption',\n      captionDelay: 250,\n    });\n  }\n}\n\nexport function showError(message) {\n  iziToast.error({\n    title: 'Error',\n    message: message,\n    position: 'topRight'\n  });\n}\n","import { fetchImages } from './js/pixabay-api.js';\nimport { renderImages, showError } from './js/render-functions.js';\n\nconst PER_PAGE = 15; \nlet currentQuery = '';\nlet totalHits = 0;\nlet page = 1;\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  const form = document.querySelector('.search-form');\n  const input = document.querySelector('.search-input');\n  const loader = document.querySelector('.loader');\n  const loadMoreBtn = document.querySelector('.load-more-btn');\n\n  form.addEventListener('submit', async (event) => {\n    event.preventDefault();\n\n    currentQuery = input.value.trim();\n    if (!currentQuery) {\n      showError('Please enter a search query.');\n      return;\n    }\n\n    page = 1;\n    loader.classList.remove('hidden');\n    loadMoreBtn.classList.add('hidden');\n\n    try {\n      const { hits, totalHits: total } = await fetchImages(currentQuery, page);\n      totalHits = total;\n      renderImages(hits);\n      loadMoreBtn.classList.remove('hidden');\n      window.scrollTo({ top: 0, behavior: 'smooth' });\n    } catch (error) {\n      showError('An error occurred while fetching images.');\n    } finally {\n      loader.classList.add('hidden');\n    }\n  });\n\n  loadMoreBtn.addEventListener('click', async () => {\n    if (page * PER_PAGE >= totalHits) {\n      showError(\"We're sorry, but you've reached the end of search results.\");\n      loadMoreBtn.classList.add('hidden');\n      return;\n    }\n\n    loader.classList.remove('hidden');\n    page += 1;\n\n    try {\n      const { hits } = await fetchImages(currentQuery, page);\n      renderImages(hits);\n\n      const card = document.querySelector('.card');\n      if (card) {\n        const cardHeight = card.getBoundingClientRect().height;\n        window.scrollBy({ top: cardHeight * 2, behavior: 'smooth' });\n      }\n    } catch (error) {\n      showError('An error occurred while fetching images.');\n    } finally {\n      loader.classList.add('hidden');\n    }\n  });\n});\n\n"],"names":["API_KEY","BASE_URL","PER_PAGE","fetchImages","query","page","axios","error","lightbox","renderImages","images","gallery","showError","image","card","imgElement","cardInfo","likes","views","comments","downloads","SimpleLightbox","message","iziToast","currentQuery","totalHits","form","input","loader","loadMoreBtn","event","hits","total","cardHeight"],"mappings":"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"}